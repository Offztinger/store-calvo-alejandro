(this["webpackJsonpstore-calvo-alejandro"]=this["webpackJsonpstore-calvo-alejandro"]||[]).push([[0],{23:function(e,t,c){},26:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){"use strict";c.r(t);var s=c(1),a=c.n(s),n=c(16),r=c.n(n),i=(c(23),c(9)),o=c(2),l=c(11),j=c(6),u=c.n(j),d=c(8),b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2MTRiZTc3YWM1NGQ5NjAwMWEzYmIxYzIiLCJpYXQiOjE2MzIzNjQ0MTB9.aVwi4YruTq5zmJ_GVrYqojHBEsrLS1I9FP5X_sVFewE",h=c(5),m=c(0),x={headers:{Authorization:"Bearer ".concat(b)}},O=Object(s.createContext)(),p=function(e){var t=e.children,c=Object(s.useState)([]),n=Object(h.a)(c,2),r=n[0],i=n[1],o=Object(s.useState)([{}]),l=Object(h.a)(o,2),j=l[0],b=l[1];return a.a.useEffect((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/history",x);case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,b(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(m.jsx)(O.Provider,{value:{user:r,setUser:i,history:j,setHistory:b},children:t})};function f(){var e=Object(s.useContext)(O),t=e.user,c=e.setUser;a.a.useEffect((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/user/me",{headers:{Authorization:"Bearer ".concat(b)}});case 3:return t=e.sent,e.next=6,t.json();case 6:s=e.sent,c(s),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);return{user:t,restCoints:function(e){c(Object(l.a)(Object(l.a)({},t),{},{points:e}))},boostCoins:function(e){e+=t.points,c(Object(l.a)(Object(l.a)({},t),{},{points:e}))}}}var v=c(7),g=Object(s.createContext)(),N=function(e){var t=e.children,c=Object(s.useState)([]),a=Object(h.a)(c,2),n=a[0],r=a[1];return Object(m.jsx)(g.Provider,{value:{products:n,setProducts:r},children:t})};var y=function(e){var t=Object(s.useState)([]),c=Object(h.a)(t,2),a=c[0],n=c[1],r=Object(s.useState)(1),i=Object(h.a)(r,2),o=i[0],l=i[1],j=Object(s.useState)(0),u=Object(h.a)(j,2),d=u[0],b=u[1],m=Object(s.useState)("Todos"),x=Object(h.a)(m,2),O=x[0],p=x[1],f=Object(s.useState)([{state1:!1,state2:!1}]),v=Object(h.a)(f,2),g=v[0],N=v[1],y=Object(s.useState)([]),C=Object(h.a)(y,2),P=C[0],B=C[1],I=Object(s.useState)(0),w=Object(h.a)(I,2),E=w[0],S=w[1];function T(){var t=a.slice(),c=(o-1)*e,s=c+e;"Todos"!==O&&(t=t.filter((function(e){return e.category===O}))),"PC Accessories"===O&&(t=a.filter((function(e){return"PC Accessories"===e.category||"PC Accesories"===e.category}))),!0===g[0].state1&&t.sort((function(e,t){return e.cost>t.cost?1:e.cost<t.cost?-1:0})),!0===g[0].state2&&t.sort((function(e,t){return e.cost<t.cost?1:e.cost>t.cost?-1:0})),S(t.length),B(t.slice(c,s))}return Object(s.useEffect)((function(){a.length&&(b(Math.ceil(a.length/e)),T())}),[a]),Object(s.useEffect)((function(){T()}),[g,O,o]),{next:function(){l((function(e){return Math.min(e+1,d)}))},prev:function(){l((function(e){return Math.max(e-1,1)}))},jump:function(e){var t=Math.max(1,e);l((function(e){return Math.min(t,d)}))},currentData:P,currentPage:o,maxPage:d,setData:n,data:a,filterButtons:g,setFilterButtons:N,filter:O,setFilter:p,totalElements:E,changeData:T}};c(26);var C=c.p+"static/media/aerolab-logo.40b78ac9.svg",P=c.p+"static/media/coin.1fc21bda.svg";function B(e){var t=e.name,c=e.points;return Object(m.jsx)("div",{className:"Navbar",children:Object(m.jsxs)("div",{className:"navbarContainer",children:[Object(m.jsx)(i.b,{to:"/store-calvo-alejandro/",children:Object(m.jsx)("img",{className:"logo",src:C,alt:"kite"})}),Object(m.jsxs)("div",{className:"userContent",children:[Object(m.jsx)(i.b,{to:"/store-calvo-alejandro/user",style:{textDecoration:"none"},children:Object(m.jsx)("p",{className:"userText",children:t})}),Object(m.jsx)(i.b,{to:"/store-calvo-alejandro/coins",style:{textDecoration:"none"},children:Object(m.jsxs)("div",{className:"coinContent",children:[Object(m.jsx)("p",{className:"coinText",children:c}),Object(m.jsx)("div",{className:"coin",children:Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})})]})})]})]})})}c(35);function I(){return Object(m.jsx)("div",{className:"Header",children:Object(m.jsx)("div",{className:"headerContent",children:Object(m.jsx)("div",{className:"image",children:Object(m.jsx)("p",{className:"headerText",children:"Electronics"})})})})}c(36);function w(e){var t=e.filterButtons,c=e.setFilterButtons,s=e.filter,a=e.setFilter,n=e.currentElements,r=e.totalElements,i=e.changeData,o=e.currentPage;return Object(m.jsxs)("div",{className:"Filters",children:[Object(m.jsxs)("div",{className:"filtersContainer",children:[Object(m.jsxs)("p",{className:"textFilters1",children:[o>1?16*(o-1)+n:n," of ",r," products"]}),Object(m.jsx)("div",{className:"line1"}),Object(m.jsx)("p",{className:"textFilters2",children:"Sort by: "}),Object(m.jsxs)("select",{value:s,onChange:function(e){console.log(e.target.value),a(e.target.value)},name:"",id:"",className:"select",children:[Object(m.jsx)("option",{value:"Todos",children:"Todos"}),Object(m.jsx)("option",{value:"Phones",children:"Phones"}),Object(m.jsx)("option",{value:"Gaming",children:"Gaming"}),Object(m.jsx)("option",{value:"Audio",children:"Audio"}),Object(m.jsx)("option",{value:"Tablets & E-readers",children:"Tablets & E-readers"}),Object(m.jsx)("option",{value:"Laptops",children:"Laptops"}),Object(m.jsx)("option",{value:"Cameras",children:"Cameras"}),Object(m.jsx)("option",{value:"PC Accessories",children:"PC Accessories"}),Object(m.jsx)("option",{value:"Monitors & TV",children:"Monitors & TV"}),Object(m.jsx)("option",{value:"Smart Home",children:"Smart Home"}),Object(m.jsx)("option",{value:"Drones",children:"Drones"})]}),Object(m.jsx)("button",{onClick:function(){!0===t[0].state2?c([{state1:!t[0].state1,state2:!t[0].state2}]):c([{state1:!t[0].state1,state2:t[0].state2}])},className:"lowest ".concat(t[0].state1?"active":""),children:"Lowest price"}),Object(m.jsx)("button",{onClick:function(){!0===t[0].state1?c([{state1:!t[0].state1,state2:!t[0].state2}]):c([{state1:t[0].state1,state2:!t[0].state2}]),i()},className:"highest ".concat(t[0].state2?"active":""),children:"Highest price"})]}),Object(m.jsx)("div",{className:"line2"})]})}c(37),c(38);var E=c.p+"static/media/buy-blue.13783e2a.svg",S=c.p+"static/media/buy-white.3eddcc1e.svg";function T(e){var t=e.id,c=e.img,s=e.category,a=e.productName,n=e.price,r=e.points,i=f().restCoints;return Object(m.jsx)("div",{className:"Product",children:Object(m.jsxs)("div",{className:"productContainer",children:[Object(m.jsxs)("div",{className:"productImage",children:[Object(m.jsx)("div",{className:"buyImageBlue",children:n<r?Object(m.jsx)("img",{className:"buyBlue",src:E,alt:"buyImage"}):Object(m.jsxs)("div",{className:"notAllow",children:[Object(m.jsxs)("p",{className:"textNotAllow",children:["You need ",n>r?n-r:0]}),Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})]})}),Object(m.jsx)("img",{className:"productImage",src:c,alt:"productImage"})]}),Object(m.jsxs)("div",{className:"productInfo",children:[Object(m.jsx)("p",{className:"category",children:s}),Object(m.jsx)("p",{className:"productName",children:a})]}),Object(m.jsxs)("div",{className:"hidden",children:[Object(m.jsx)("div",{className:"buyImageWhite",children:Object(m.jsx)("img",{className:"buyWhite",src:S,alt:"buyImage"})}),Object(m.jsxs)("div",{className:"buyContainer",children:[Object(m.jsxs)("div",{className:"coinContainer",children:[Object(m.jsx)("p",{className:"textCoin",children:n}),Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})]}),n<r?Object(m.jsx)("button",{onClick:function(){n<r?(fetch("https://coding-challenge-api.aerolab.co/redeem",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(b)},body:JSON.stringify({productId:t})}),i(r-n),alert("\xa1Compra exitosa!")):alert("Uh oh, ha ocurrido un error...")},className:"redeemButton",children:"Redeem now"}):Object(m.jsx)("div",{className:"notAllow",children:Object(m.jsx)("p",{className:"textNotAllow",children:"Can't Purchase"})})]})]})]})})}function k(e){var t=e.points,c=e.products,s=e.currentPage,a=e.maxPage,n=e.next,r=e.prev;return Object(m.jsx)("div",{className:"Results",children:Object(m.jsxs)("div",{className:"resultsContainer",children:[Object(m.jsxs)("div",{className:"arrowContainer",children:[Object(m.jsx)("i",{onClick:r,className:s>1?"fas fa-chevron-left":"fas fa-chevron-left unabled",style:{margin:"0 1rem"}}),Object(m.jsx)("div",{children:s}),Object(m.jsx)("i",{onClick:n,className:s<a?"fas fa-chevron-right":"fas fa-chevron-right unabled",style:{margin:"0 1rem"}})]}),c.map((function(e){return Object(m.jsx)("div",{className:"item",children:Object(m.jsx)(T,{id:e._id,img:e.img.url,category:e.category,productName:e.name,price:e.cost,points:t})},e._id)}))]})})}c(39);function F(){var e=f().boostCoins,t=function(){var t=Object(d.a)(u.a.mark((function t(c){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://coding-challenge-api.aerolab.co/user/points",{method:"POST",body:JSON.stringify({amount:c}),headers:{"Content-type":"application/json; charset=UTF-8",Authorization:"Bearer ".concat(b)}});case 3:e(c),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),console.error(t.t0);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}();return Object(m.jsx)("div",{className:"Coins",children:Object(m.jsxs)("div",{className:"coinsContainer",children:[Object(m.jsx)("p",{className:"textCoinsPrincipal",children:"En este apartado podr\xe1 a\xf1adir fondos a tu monedero:"}),Object(m.jsxs)("button",{onClick:function(){return t(1e3)},className:"coinButton",children:["1000",Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})]}),Object(m.jsxs)("button",{onClick:function(){return t(5e3)},className:"coinButton",children:["5000",Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})]}),Object(m.jsxs)("button",{onClick:function(){return t(7500)},className:"coinButton",children:["7500",Object(m.jsx)("img",{className:"coin",src:P,alt:"coin"})]})]})})}c(40);var A=c.p+"static/media/user.4a000e6c.svg";function D(){var e=f().user,t=a.a.useContext(O).history;return Object(m.jsx)("div",{className:"History",children:Object(m.jsxs)("div",{className:"historyContainer",children:[Object(m.jsx)("div",{className:"user",children:Object(m.jsx)("img",{src:A,alt:"user"})}),Object(m.jsxs)("div",{className:"userInformation",children:[Object(m.jsx)("p",{className:"userInformationText",children:e.name}),Object(m.jsxs)("p",{className:"userInformationText",children:["Puntos: ",e.points]}),Object(m.jsx)("div",{className:"historyInformation",children:t.map((function(e){return Object(m.jsx)("ul",{style:{listStyle:"none"},children:Object(m.jsxs)("li",{style:{margin:".7rem .5rem"},children:["Se compr\xf3 ",e.name]})},e._id)}))})]})]})})}function M(){var e=f().user,t=function(){var e,t=Object(s.useContext)(g),c=t.products,n=t.setProducts,r={headers:{Authorization:"Bearer ".concat(b)}},i=y(16),o=i.setData,l=i.currentData,j=i.data,h=i.filterButtons,m=i.setFilterButtons,x=i.filter,O=i.setFilter,p=i.totalElements,f=i.changeData,N=i.currentPage,C=i.maxPage,P=i.next,B=i.prev;return a.a.useEffect((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://coding-challenge-api.aerolab.co/products",r);case 3:return t=e.sent,e.next=6,t.json();case 6:c=e.sent,n(c),o(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),e={products:c,currentData:l,data:j,filterButtons:h,setFilterButtons:m,filter:x,setFilter:O},Object(v.a)(e,"currentData",l),Object(v.a)(e,"totalElements",p),Object(v.a)(e,"changeData",f),Object(v.a)(e,"currentPage",N),Object(v.a)(e,"maxPage",C),Object(v.a)(e,"prev",B),Object(v.a)(e,"next",P),e}(),c=t.filterButtons,n=t.setFilterButtons,r=t.filter,l=t.setFilter,j=t.currentData,h=t.totalElements,x=t.changeData,O=t.currentPage,p=t.maxPage,N=t.next,C=t.prev;return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(i.a,{children:[Object(m.jsx)(B,{name:e.name,points:e.points}),Object(m.jsx)(I,{}),Object(m.jsxs)(o.c,{children:[Object(m.jsx)(o.a,{path:"/store-calvo-alejandro/user",children:Object(m.jsx)(D,{})}),Object(m.jsx)(o.a,{path:"/store-calvo-alejandro/coins",children:Object(m.jsx)(F,{})}),Object(m.jsxs)(o.a,{path:"/store-calvo-alejandro/",children:[Object(m.jsx)(w,{filterButtons:c,setFilterButtons:n,filter:r,setFilter:l,totalElements:h,currentElements:j.length,changeData:x,currentPage:O}),Object(m.jsx)(k,{points:e.points,currentPage:O,products:j,maxPage:p,next:N,prev:C})]})]})]})})}r.a.render(Object(m.jsx)(p,{children:Object(m.jsx)(N,{children:Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(M,{})})})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.0b031884.chunk.js.map